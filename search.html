---
layout: default
title: Search
permalink: /search.html
---

<h1>Search results for "<span id="search-query"></span>"</h1>
<div id="search-results">Loading results...</div>

<script>
    // Get search query from URL
    const params = new URLSearchParams(window.location.search);
    const query = params.get('q')?.toLowerCase() || '';
    document.getElementById('search-query').textContent = query;

    // Exit early if no query
    if (!query) {
        document.getElementById('search-results').innerHTML = '<p>No query provided.</p>';
    } else {
        fetch('{{ "/search.json" | relative_url }}')
            .then(response => response.json())
            .then(data => {
                const results = data.filter(post =>
                    post.title.toLowerCase().includes(query) ||
                    post.content.toLowerCase().includes(query)
                );

                if (results.length === 0) {
                    document.getElementById('search-results').innerHTML = '<p>No results found.</p>';
                    return;
                }

                const html = results.map(post => `
        <div class="post-card">
            <div class="post-meta">
            <span class="post-date">Date Unknown</span>
            </div>
            <h2 class="post-title"><a href="${post.url}">${post.title}</a></h2>
            <p class="post-summary">${post.excerpt}</p>
            <div class="read-more"><a href="${post.url}">READ MORE...</a></div>
        </div>
        `).join('');


                document.getElementById('search-results').innerHTML = html;
            })
            .catch(error => {
                console.error('Search failed:', error);
                document.getElementById('search-results').innerHTML = '<p>There was an error loading the search results.</p>';
            });
    }
</script>